
 app-native-1 Pulling 
 app-native-2 Pulling 
 async-worker Pulling 
 async-worker-2 Pulling 
 async-worker Pulled 
 async-worker-2 Pulled 
 app-native-2 Pulled 
 app-native-1 Pulled 
 Network backend  Creating
 Network backend  Created
 Container maxsonferovante-redis-1  Creating
 Container maxsonferovante-redis-1  Created
 Container maxsonferovante-async-worker-1  Creating
 Container maxsonferovante-async-worker-2-1  Creating
 Container maxsonferovante-app-native-1-1  Creating
 Container maxsonferovante-app-native-2-1  Creating
 Container maxsonferovante-async-worker-1  Created
 Container maxsonferovante-app-native-2-1  Created
 Container maxsonferovante-async-worker-2-1  Created
 Container maxsonferovante-app-native-1-1  Created
 Container maxsonferovante-nginx-1  Creating
 Container maxsonferovante-nginx-1  Created
Attaching to app-native-1-1, app-native-2-1, async-worker-1, async-worker-2-1, nginx-1, redis-1
redis-1           | 1:C 27 Jul 2025 05:46:08.052 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis-1           | 1:C 27 Jul 2025 05:46:08.052 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis-1           | 1:C 27 Jul 2025 05:46:08.052 * Redis version=7.4.5, bits=64, commit=00000000, modified=0, pid=1, just started
redis-1           | 1:C 27 Jul 2025 05:46:08.052 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
redis-1           | 1:M 27 Jul 2025 05:46:08.053 * monotonic clock: POSIX clock_gettime
redis-1           | 1:M 27 Jul 2025 05:46:08.053 * Running mode=standalone, port=6379.
redis-1           | 1:M 27 Jul 2025 05:46:08.054 * Server initialized
redis-1           | 1:M 27 Jul 2025 05:46:08.054 * Ready to accept connections tcp
app-native-2-1    | 2025-07-27T05:46:14.406Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : Starting AOT-processed ApiPaymentProcessorApplication using Java 24.0.2 with PID 1 (/app/app started by appuser in /app)
app-native-2-1    | 2025-07-27T05:46:14.407Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : No active profile set, falling back to 1 default profile: "default"
app-native-1-1    | 2025-07-27T05:46:14.406Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : Starting AOT-processed ApiPaymentProcessorApplication using Java 24.0.2 with PID 1 (/app/app started by appuser in /app)
app-native-1-1    | 2025-07-27T05:46:14.409Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : No active profile set, falling back to 1 default profile: "default"
async-worker-1    | 2025-07-27T05:46:14.424Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : Starting AOT-processed AsyncPaymentProcessorApplication using Java 24.0.2 with PID 1 (/app/app started by appuser in /app)
async-worker-1    | 2025-07-27T05:46:14.424Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : No active profile set, falling back to 1 default profile: "default"
async-worker-2-1  | 2025-07-27T05:46:14.481Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : Starting AOT-processed AsyncPaymentProcessorApplication using Java 24.0.2 with PID 1 (/app/app started by appuser in /app)
async-worker-2-1  | 2025-07-27T05:46:14.482Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : No active profile set, falling back to 1 default profile: "default"
app-native-1-1    | 2025-07-27T05:46:14.493Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8089 (http)
app-native-1-1    | 2025-07-27T05:46:14.495Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
app-native-1-1    | 2025-07-27T05:46:14.495Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.42]
app-native-2-1    | 2025-07-27T05:46:14.498Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8089 (http)
app-native-2-1    | 2025-07-27T05:46:14.499Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
app-native-2-1    | 2025-07-27T05:46:14.499Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.42]
async-worker-1    | WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
async-worker-1    | WARNING: sun.misc.Unsafe::allocateMemory has been called by io.netty.util.internal.PlatformDependent0$2 (file:/app/app)
async-worker-1    | WARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$2
async-worker-1    | WARNING: sun.misc.Unsafe::allocateMemory will be removed in a future release
async-worker-2-1  | WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
async-worker-2-1  | WARNING: sun.misc.Unsafe::allocateMemory has been called by io.netty.util.internal.PlatformDependent0$2 (file:/app/app)
async-worker-2-1  | WARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$2
async-worker-2-1  | WARNING: sun.misc.Unsafe::allocateMemory will be removed in a future release
app-native-1-1    | 2025-07-27T05:46:14.516Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
app-native-1-1    | 2025-07-27T05:46:14.517Z  INFO 1 --- [ApiPaymentProcessor] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 108 ms
app-native-2-1    | 2025-07-27T05:46:14.595Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
app-native-2-1    | 2025-07-27T05:46:14.595Z  INFO 1 --- [ApiPaymentProcessor] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 188 ms
nginx-1           | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1           | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1           | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
app-native-1-1    | WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
app-native-1-1    | WARNING: sun.misc.Unsafe::allocateMemory has been called by io.netty.util.internal.PlatformDependent0$2 (file:/app/app)
app-native-1-1    | WARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$2
app-native-1-1    | WARNING: sun.misc.Unsafe::allocateMemory will be removed in a future release
nginx-1           | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1           | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1           | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1           | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1           | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1           | /docker-entrypoint.sh: Configuration complete; ready for start up
app-native-2-1    | WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
app-native-2-1    | WARNING: sun.misc.Unsafe::allocateMemory has been called by io.netty.util.internal.PlatformDependent0$2 (file:/app/app)
app-native-2-1    | WARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$2
app-native-2-1    | WARNING: sun.misc.Unsafe::allocateMemory will be removed in a future release
app-native-1-1    | 2025-07-27T05:46:14.785Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8089 (http) with context path '/'
app-native-1-1    | 2025-07-27T05:46:14.785Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : Started ApiPaymentProcessorApplication in 0.433 seconds (process running for 0.53)
async-worker-1    | 2025-07-27T05:46:14.796Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
async-worker-1    | 2025-07-27T05:46:14.796Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'AsyncPaymentProcessor.errorChannel' has 1 subscriber(s).
async-worker-1    | 2025-07-27T05:46:14.796Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
async-worker-1    | 2025-07-27T05:46:14.797Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : Started AsyncPaymentProcessorApplication in 0.441 seconds (process running for 0.535)
async-worker-1    | WARNING: A restricted method in java.lang.System has been called
async-worker-1    | WARNING: java.lang.System::loadLibrary has been called by io.netty.util.internal.NativeLibraryUtil in an unnamed module (file:/app/app)
async-worker-1    | WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
async-worker-1    | WARNING: Restricted methods will be blocked in a future release unless native access is enabled
async-worker-1    | 
app-native-2-1    | 2025-07-27T05:46:14.985Z  INFO 1 --- [ApiPaymentProcessor] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8089 (http) with context path '/'
app-native-2-1    | 2025-07-27T05:46:14.986Z  INFO 1 --- [ApiPaymentProcessor] [           main] c.m.a.ApiPaymentProcessorApplication     : Started ApiPaymentProcessorApplication in 0.634 seconds (process running for 0.657)
async-worker-2-1  | 2025-07-27T05:46:15.095Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
async-worker-2-1  | 2025-07-27T05:46:15.096Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'AsyncPaymentProcessor.errorChannel' has 1 subscriber(s).
async-worker-2-1  | 2025-07-27T05:46:15.096Z  INFO 1 --- [AsyncPaymentProcessor] [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
async-worker-2-1  | 2025-07-27T05:46:15.098Z  INFO 1 --- [AsyncPaymentProcessor] [           main] c.m.a.AsyncPaymentProcessorApplication   : Started AsyncPaymentProcessorApplication in 0.743 seconds (process running for 0.799)
async-worker-2-1  | WARNING: A restricted method in java.lang.System has been called
async-worker-2-1  | WARNING: java.lang.System::loadLibrary has been called by io.netty.util.internal.NativeLibraryUtil in an unnamed module (file:/app/app)
async-worker-2-1  | WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
async-worker-2-1  | WARNING: Restricted methods will be blocked in a future release unless native access is enabled
async-worker-2-1  | 
app-native-1-1    | 2025-07-27T05:46:15.337Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
app-native-1-1    | 2025-07-27T05:46:15.337Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
app-native-1-1    | 2025-07-27T05:46:15.338Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
app-native-1-1    | WARNING: A restricted method in java.lang.System has been called
app-native-1-1    | WARNING: java.lang.System::loadLibrary has been called by io.netty.util.internal.NativeLibraryUtil in an unnamed module (file:/app/app)
app-native-1-1    | WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
app-native-1-1    | WARNING: Restricted methods will be blocked in a future release unless native access is enabled
app-native-1-1    | 
async-worker-2-1  | 2025-07-27T05:46:19.302Z  WARN 1 --- [AsyncPaymentProcessor] [       Thread-0] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check DEFAULT: request timed out
async-worker-2-1  | 2025-07-27T05:46:19.302Z  WARN 1 --- [AsyncPaymentProcessor] [       Thread-0] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: DEFAULT
async-worker-2-1  | 2025-07-27T05:46:19.302Z  WARN 1 --- [AsyncPaymentProcessor] [       Thread-1] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check FALLBACK: request timed out
async-worker-2-1  | 2025-07-27T05:46:19.302Z  WARN 1 --- [AsyncPaymentProcessor] [       Thread-1] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: FALLBACK
app-native-1-1    | 2025-07-27T05:46:21.442Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-1] c.m.a.a.service.PaymentSummaryService    : Listas de histórico de pagamento foram limpas do Redis.
app-native-2-1    | 2025-07-27T05:46:21.445Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
app-native-2-1    | 2025-07-27T05:46:21.445Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
app-native-2-1    | 2025-07-27T05:46:21.445Z  INFO 1 --- [ApiPaymentProcessor] [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
app-native-2-1    | WARNING: A restricted method in java.lang.System has been called
app-native-2-1    | WARNING: java.lang.System::loadLibrary has been called by io.netty.util.internal.NativeLibraryUtil in an unnamed module (file:/app/app)
app-native-2-1    | WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
app-native-2-1    | WARNING: Restricted methods will be blocked in a future release unless native access is enabled
app-native-2-1    | 
async-worker-2-1  | 2025-07-27T05:47:04.797Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-10] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check DEFAULT: request timed out
async-worker-2-1  | 2025-07-27T05:47:04.797Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-11] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check FALLBACK: request timed out
async-worker-2-1  | 2025-07-27T05:47:04.797Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-11] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: FALLBACK
async-worker-2-1  | 2025-07-27T05:47:04.797Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-10] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: DEFAULT
redis-1           | 1:M 27 Jul 2025 05:47:09.033 * 10000 changes in 60 seconds. Saving...
redis-1           | 1:M 27 Jul 2025 05:47:09.033 * Background saving started by pid 87
redis-1           | 87:C 27 Jul 2025 05:47:09.063 * DB saved on disk
redis-1           | 87:C 27 Jul 2025 05:47:09.064 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
redis-1           | 1:M 27 Jul 2025 05:47:09.135 * Background saving terminated with success
async-worker-2-1  | 2025-07-27T05:47:19.892Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7100] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout processando pagamento 3fc8ec16-e964-4053-844f-3d4dba532958 via FALLBACK: request timed out
async-worker-2-1  | 2025-07-27T05:47:20.192Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-15] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check FALLBACK: request timed out
async-worker-2-1  | 2025-07-27T05:47:20.193Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-15] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: FALLBACK
async-worker-2-1  | 2025-07-27T05:47:20.193Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-14] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout no health check DEFAULT: request timed out
async-worker-2-1  | 2025-07-27T05:47:20.193Z  WARN 1 --- [AsyncPaymentProcessor] [      Thread-14] c.m.a.a.s.HealthCheckOrchestratorImpl    : Não foi possível obter health status do Payment Processor: DEFAULT
async-worker-1    | 2025-07-27T05:47:23.103Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.endpoint.EventDrivenConsumer       : Removing {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
async-worker-1    | 2025-07-27T05:47:23.104Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.channel.PublishSubscribeChannel    : Channel 'AsyncPaymentProcessor.errorChannel' has 0 subscriber(s).
async-worker-1    | 2025-07-27T05:47:23.104Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.endpoint.EventDrivenConsumer       : stopped bean '_org.springframework.integration.errorLogger'
async-worker-2-1  | 2025-07-27T05:47:23.385Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.o.r.RedisHealthCacheRepository   : Erro inesperado ao recuperar HealthStatus do cache: type=DEFAULT, erro=LettuceConnectionFactory is STOPPING
async-worker-2-1  | 2025-07-27T05:47:23.385Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.o.r.RedisHealthCacheRepository   : Erro ao remover HealthStatus do cache: type=DEFAULT, erro=LettuceConnectionFactory is STOPPING
async-worker-2-1  | 2025-07-27T05:47:23.385Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.o.r.RedisHealthCacheRepository   : Erro inesperado ao recuperar HealthStatus do cache: type=FALLBACK, erro=LettuceConnectionFactory is STOPPING
async-worker-2-1  | 2025-07-27T05:47:23.385Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.o.r.RedisHealthCacheRepository   : Erro ao remover HealthStatus do cache: type=FALLBACK, erro=LettuceConnectionFactory is STOPPING
async-worker-2-1  | 2025-07-27T05:47:23.385Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.endpoint.EventDrivenConsumer       : Removing {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
async-worker-2-1  | 2025-07-27T05:47:23.385Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.channel.PublishSubscribeChannel    : Channel 'AsyncPaymentProcessor.errorChannel' has 0 subscriber(s).
async-worker-2-1  | 2025-07-27T05:47:23.386Z  INFO 1 --- [AsyncPaymentProcessor] [ionShutdownHook] o.s.i.endpoint.EventDrivenConsumer       : stopped bean '_org.springframework.integration.errorLogger'
async-worker-2-1  | 2025-07-27T05:47:23.385Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=07beaeaa-323c-4223-a3a7-4a2917e0d05a, erro=LettuceConnectionFactory is STOPPING
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory is STOPPING
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1452) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:140) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:65) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.390Z  WARN 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.u.ProcessPaymentUseCaseImpl      : Erro ao processar pagamento: 07beaeaa-323c-4223-a3a7-4a2917e0d05a - Falha ao publicar pagamento na fila
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=07beaeaa-323c-4223-a3a7-4a2917e0d05a, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:144) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:65) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=07beaeaa-323c-4223-a3a7-4a2917e0d05a, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:140) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:69) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.390Z  WARN 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.u.ProcessPaymentUseCaseImpl      : Erro ao processar pagamento: 07beaeaa-323c-4223-a3a7-4a2917e0d05a - Falha ao publicar pagamento na fila
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=07beaeaa-323c-4223-a3a7-4a2917e0d05a, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:144) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:69) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8392] c.m.a.a.w.PaymentProcessorWorkerImpl     : Erro ao processar mensagem de pagamento: Falha ao publicar pagamento na fila
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8383] c.m.a.a.service.PaymentHistoryService    : Falha ao gravar pagamento no Redis. CorrelationId: ab10c873-694f-4238-b63e-5bc81b5e1dda, Error: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.service.PaymentHistoryService.recordPayment(PaymentHistoryService.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:61) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.390Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8390] c.m.a.a.service.PaymentHistoryService    : Falha ao gravar pagamento no Redis. CorrelationId: 515b407c-c661-4fc9-ac85-8bf6ec5c907c, Error: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.service.PaymentHistoryService.recordPayment(PaymentHistoryService.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:61) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:23.391Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-8391] c.m.a.a.service.PaymentHistoryService    : Falha ao gravar pagamento no Redis. CorrelationId: 465f8e89-dc75-4fa6-b4c5-2d06c5f8b186, Error: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.service.PaymentHistoryService.recordPayment(PaymentHistoryService.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:61) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
[Knginx-1 exited with code 0
app-native-2-1    | 2025-07-27T05:47:23.572Z  INFO 1 --- [ApiPaymentProcessor] [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
app-native-1-1    | 2025-07-27T05:47:23.572Z  INFO 1 --- [ApiPaymentProcessor] [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
app-native-2-1    | 2025-07-27T05:47:23.575Z  INFO 1 --- [ApiPaymentProcessor] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
app-native-1-1    | 2025-07-27T05:47:23.575Z  INFO 1 --- [ApiPaymentProcessor] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
[Kasync-worker-1 exited with code 143
[Kapp-native-1-1 exited with code 143
[Kapp-native-2-1 exited with code 143
async-worker-2-1  | 2025-07-27T05:47:24.985Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.o.p.PaymentProcessorHttpClient   : Timeout processando pagamento cc362fff-3c07-497f-9344-68ac89ef2737 via FALLBACK: request timed out
async-worker-2-1  | 2025-07-27T05:47:24.985Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=cc362fff-3c07-497f-9344-68ac89ef2737, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:140) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:65) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:24.985Z  WARN 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.u.ProcessPaymentUseCaseImpl      : Erro ao processar pagamento: cc362fff-3c07-497f-9344-68ac89ef2737 - Falha ao publicar pagamento na fila
async-worker-2-1  | 2025-07-27T05:47:24.985Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=cc362fff-3c07-497f-9344-68ac89ef2737, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:144) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:65) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:24.986Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=cc362fff-3c07-497f-9344-68ac89ef2737, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:140) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:69) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:24.986Z  WARN 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.u.ProcessPaymentUseCaseImpl      : Erro ao processar pagamento: cc362fff-3c07-497f-9344-68ac89ef2737 - Falha ao publicar pagamento na fila
async-worker-2-1  | 2025-07-27T05:47:24.986Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.i.r.RedisPaymentQueuePublisher   : Erro ao publicar pagamento na fila Redis: correlationId=cc362fff-3c07-497f-9344-68ac89ef2737, erro=LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 
async-worker-2-1  | java.lang.IllegalStateException: LettuceConnectionFactory has been STOPPED. Use start() to initialize it
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.assertStarted(LettuceConnectionFactory.java:1449) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1049) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:195) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105) ~[na:na]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:400) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:117) ~[app:3.5.1]
async-worker-2-1  | 	at org.springframework.data.redis.core.DefaultListOperations.leftPush(DefaultListOperations.java:111) ~[app:3.5.1]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.adapter.in.redis.RedisPaymentQueuePublisher.publish(RedisPaymentQueuePublisher.java:48) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.handlePaymentFailure(ProcessPaymentUseCaseImpl.java:144) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.usecase.ProcessPaymentUseCaseImpl.processPaymentAsync(ProcessPaymentUseCaseImpl.java:69) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.processPaymentMessage(PaymentProcessorWorkerImpl.java:150) ~[app:na]
async-worker-2-1  | 	at com.maal.asyncpaymentprocessor.application.worker.PaymentProcessorWorkerImpl.lambda$submitPaymentForProcessing$0(PaymentProcessorWorkerImpl.java:136) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545) ~[na:na]
async-worker-2-1  | 	at java.base@24.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:328) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.Thread.runWith(Thread.java:1460) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread.run(VirtualThread.java:466) ~[app:na]
async-worker-2-1  | 	at java.base@24.0.2/java.lang.VirtualThread$VThreadContinuation$1.run(VirtualThread.java:258) ~[na:na]
async-worker-2-1  | 
async-worker-2-1  | 2025-07-27T05:47:24.986Z ERROR 1 --- [AsyncPaymentProcessor] [   virtual-7773] c.m.a.a.w.PaymentProcessorWorkerImpl     : Erro ao processar mensagem de pagamento: Falha ao publicar pagamento na fila
[Kasync-worker-2-1 exited with code 143
redis-1           | 1:signal-handler (1753595245) Received SIGTERM scheduling shutdown...
redis-1           | 1:M 27 Jul 2025 05:47:25.478 * User requested shutdown...
redis-1           | 1:M 27 Jul 2025 05:47:25.478 * Saving the final RDB snapshot before exiting.
redis-1           | 1:M 27 Jul 2025 05:47:25.505 * DB saved on disk
redis-1           | 1:M 27 Jul 2025 05:47:25.505 # Redis is now ready to exit, bye bye...
[Kredis-1 exited with code 0
log truncated at line 1000
