
 worker Pulling 
 api1 Pulling 
 api2 Pulling 
 9824c27679d3 Already exists 
 745a1af2fe11 Already exists 
 52aebca103e3 Pulling fs layer 
 81b6448f7b77 Pulling fs layer 
 254e0cdee303 Pulling fs layer 
 925afb0c8e94 Pulling fs layer 
 925afb0c8e94 Waiting 
 9824c27679d3 Already exists 
 745a1af2fe11 Already exists 
 52aebca103e3 Pulling fs layer 
 81b6448f7b77 Pulling fs layer 
 254e0cdee303 Pulling fs layer 
 925afb0c8e94 Pulling fs layer 
 925afb0c8e94 Waiting 
 9824c27679d3 Already exists 
 745a1af2fe11 Already exists 
 52aebca103e3 Pulling fs layer 
 81b6448f7b77 Pulling fs layer 
 254e0cdee303 Pulling fs layer 
 925afb0c8e94 Pulling fs layer 
 925afb0c8e94 Waiting 
 52aebca103e3 Verifying Checksum 
 52aebca103e3 Download complete 
 52aebca103e3 Downloading [==================================================>]     331B/331B
 52aebca103e3 Downloading [==================================================>]     331B/331B
 52aebca103e3 Verifying Checksum 
 52aebca103e3 Download complete 
 52aebca103e3 Verifying Checksum 
 52aebca103e3 Download complete 
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Extracting [==================================================>]     331B/331B
 52aebca103e3 Pull complete 
 52aebca103e3 Pull complete 
 52aebca103e3 Pull complete 
 254e0cdee303 Downloading [>                                                  ]  81.92kB/7.846MB
 254e0cdee303 Downloading [>                                                  ]  81.92kB/7.846MB
 254e0cdee303 Downloading [>                                                  ]  81.92kB/7.846MB
 81b6448f7b77 Downloading [=>                                                 ]  1.369kB/44.27kB
 81b6448f7b77 Downloading [==================================================>]  44.27kB/44.27kB
 81b6448f7b77 Verifying Checksum 
 81b6448f7b77 Download complete 
 81b6448f7b77 Downloading [=>                                                 ]  1.369kB/44.27kB
 81b6448f7b77 Downloading [==================================================>]  44.27kB/44.27kB
 81b6448f7b77 Verifying Checksum 
 81b6448f7b77 Extracting [=====================================>             ]  32.77kB/44.27kB
 81b6448f7b77 Downloading [=>                                                 ]  1.369kB/44.27kB
 81b6448f7b77 Downloading [==================================================>]  44.27kB/44.27kB
 81b6448f7b77 Verifying Checksum 
 81b6448f7b77 Extracting [=====================================>             ]  32.77kB/44.27kB
 81b6448f7b77 Extracting [=====================================>             ]  32.77kB/44.27kB
 81b6448f7b77 Extracting [==================================================>]  44.27kB/44.27kB
 81b6448f7b77 Extracting [==================================================>]  44.27kB/44.27kB
 81b6448f7b77 Extracting [==================================================>]  44.27kB/44.27kB
 254e0cdee303 Downloading [=======>                                           ]  1.233MB/7.846MB
 254e0cdee303 Downloading [=======>                                           ]  1.233MB/7.846MB
 254e0cdee303 Downloading [=======>                                           ]  1.233MB/7.846MB
 81b6448f7b77 Pull complete 
 81b6448f7b77 Pull complete 
 81b6448f7b77 Pull complete 
 254e0cdee303 Downloading [=================>                                 ]  2.818MB/7.846MB
 254e0cdee303 Downloading [=================>                                 ]  2.818MB/7.846MB
 254e0cdee303 Downloading [=================>                                 ]  2.818MB/7.846MB
 254e0cdee303 Downloading [=====================================>             ]  5.882MB/7.846MB
 254e0cdee303 Downloading [=====================================>             ]  5.882MB/7.846MB
 254e0cdee303 Downloading [=====================================>             ]  5.882MB/7.846MB
 254e0cdee303 Verifying Checksum 
 254e0cdee303 Download complete 
 254e0cdee303 Verifying Checksum 
 254e0cdee303 Verifying Checksum 
 254e0cdee303 Download complete 
 254e0cdee303 Download complete 
 254e0cdee303 Extracting [>                                                  ]   98.3kB/7.846MB
 254e0cdee303 Extracting [>                                                  ]   98.3kB/7.846MB
 254e0cdee303 Extracting [>                                                  ]   98.3kB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Extracting [==================================================>]  7.846MB/7.846MB
 254e0cdee303 Pull complete 
 254e0cdee303 Pull complete 
 254e0cdee303 Pull complete 
 925afb0c8e94 Downloading [>                                                  ]  78.22kB/7.798MB
 925afb0c8e94 Downloading [>                                                  ]  78.22kB/7.798MB
 925afb0c8e94 Downloading [>                                                  ]  78.22kB/7.798MB
 925afb0c8e94 Downloading [=>                                                 ]  237.6kB/7.798MB
 925afb0c8e94 Downloading [=>                                                 ]  237.6kB/7.798MB
 925afb0c8e94 Downloading [=>                                                 ]  237.6kB/7.798MB
 925afb0c8e94 Downloading [==>                                                ]  401.4kB/7.798MB
 925afb0c8e94 Downloading [==>                                                ]  401.4kB/7.798MB
 925afb0c8e94 Downloading [==>                                                ]  401.4kB/7.798MB
 925afb0c8e94 Downloading [====>                                              ]  655.4kB/7.798MB
 925afb0c8e94 Downloading [====>                                              ]  655.4kB/7.798MB
 925afb0c8e94 Downloading [====>                                              ]  655.4kB/7.798MB
 925afb0c8e94 Downloading [======>                                            ]    983kB/7.798MB
 925afb0c8e94 Downloading [======>                                            ]    983kB/7.798MB
 925afb0c8e94 Downloading [======>                                            ]    983kB/7.798MB
 925afb0c8e94 Downloading [========>                                          ]  1.401MB/7.798MB
 925afb0c8e94 Downloading [========>                                          ]  1.401MB/7.798MB
 925afb0c8e94 Downloading [========>                                          ]  1.401MB/7.798MB
 925afb0c8e94 Downloading [============>                                      ]  1.982MB/7.798MB
 925afb0c8e94 Downloading [============>                                      ]  1.982MB/7.798MB
 925afb0c8e94 Downloading [============>                                      ]  1.982MB/7.798MB
 925afb0c8e94 Downloading [======================>                            ]  3.478MB/7.798MB
 925afb0c8e94 Downloading [======================>                            ]  3.478MB/7.798MB
 925afb0c8e94 Downloading [======================>                            ]  3.478MB/7.798MB
 925afb0c8e94 Downloading [=============================>                     ]  4.637MB/7.798MB
 925afb0c8e94 Downloading [=============================>                     ]  4.637MB/7.798MB
 925afb0c8e94 Downloading [=============================>                     ]  4.637MB/7.798MB
 925afb0c8e94 Downloading [=======================================>           ]  6.226MB/7.798MB
 925afb0c8e94 Downloading [=======================================>           ]  6.226MB/7.798MB
 925afb0c8e94 Downloading [=======================================>           ]  6.226MB/7.798MB
 925afb0c8e94 Download complete 
 925afb0c8e94 Download complete 
 925afb0c8e94 Download complete 
 925afb0c8e94 Extracting [>                                                  ]   98.3kB/7.798MB
 925afb0c8e94 Extracting [>                                                  ]   98.3kB/7.798MB
 925afb0c8e94 Extracting [>                                                  ]   98.3kB/7.798MB
 925afb0c8e94 Extracting [===========================================>       ]  6.783MB/7.798MB
 925afb0c8e94 Extracting [===========================================>       ]  6.783MB/7.798MB
 925afb0c8e94 Extracting [===========================================>       ]  6.783MB/7.798MB
 925afb0c8e94 Extracting [==================================================>]  7.798MB/7.798MB
 925afb0c8e94 Extracting [==================================================>]  7.798MB/7.798MB
 925afb0c8e94 Extracting [==================================================>]  7.798MB/7.798MB
 925afb0c8e94 Pull complete 
 925afb0c8e94 Pull complete 
 925afb0c8e94 Pull complete 
 api1 Pulled 
 api2 Pulled 
 worker Pulled 
 Network payment-proxy_backend  Creating
 Network payment-proxy_backend  Created
 Container redis  Creating
 Container payment-db  Creating
 Container payment-db  Created
 Container redis  Created
 Container api1  Creating
 Container api2  Creating
 Container worker  Creating
 Container api2  Created
 Container api1  Created
 Container worker  Created
 Container nginx-lb  Creating
 Container nginx-lb  Created
Attaching to api1, api2, nginx-lb, payment-db, redis, worker
payment-db  | The files belonging to this database system will be owned by user "postgres".
payment-db  | This user must also own the server process.
payment-db  | 
payment-db  | The database cluster will be initialized with locale "en_US.utf8".
payment-db  | The default database encoding has accordingly been set to "UTF8".
payment-db  | The default text search configuration will be set to "english".
payment-db  | 
payment-db  | Data page checksums are disabled.
payment-db  | 
payment-db  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
payment-db  | creating subdirectories ... ok
payment-db  | selecting dynamic shared memory implementation ... posix
payment-db  | selecting default "max_connections" ... 100
payment-db  | selecting default "shared_buffers" ... 128MB
redis       | Starting Redis Server
redis       | 1:C 06 Aug 2025 01:48:19.805 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis       | 1:C 06 Aug 2025 01:48:19.805 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis       | 1:C 06 Aug 2025 01:48:19.805 * Redis version=8.0.3, bits=64, commit=00000000, modified=1, pid=1, just started
redis       | 1:C 06 Aug 2025 01:48:19.805 * Configuration loaded
redis       | 1:M 06 Aug 2025 01:48:19.805 * monotonic clock: POSIX clock_gettime
redis       | 1:M 06 Aug 2025 01:48:19.806 * Running mode=standalone, port=6379.
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> RedisBloom version 8.0.1 (Git=unknown)
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> Registering configuration options: [
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ bf-error-rate       :      0.01 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ bf-initial-size     :       100 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ bf-expansion-factor :         2 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ cf-bucket-size      :         2 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ cf-initial-size     :      1024 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ cf-max-iterations   :        20 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ cf-expansion-factor :         1 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> 	{ cf-max-expansions   :        32 }
redis       | 1:M 06 Aug 2025 01:48:19.807 * <bf> ]
redis       | 1:M 06 Aug 2025 01:48:19.807 * Module 'bf' loaded from /usr/local/lib/redis/modules//redisbloom.so
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Redis version found by RedisSearch : 8.0.3 - oss
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> RediSearch version 8.0.1 (Git=5688fcc)
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Low level api version 1 initialized successfully
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> gc: ON, prefix min length: 2, min word length to stem: 4, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, max number of search results:  1000000, 
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Initialized thread pools!
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Disabled workers threadpool of size 0
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Subscribe to config changes
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Enabled role change notification
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Cluster configuration: AUTO partitions, type: 0, coordinator timeout: 0ms
redis       | 1:M 06 Aug 2025 01:48:19.810 * <search> Register write commands
redis       | 1:M 06 Aug 2025 01:48:19.810 * Module 'search' loaded from /usr/local/lib/redis/modules//redisearch.so
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> RedisTimeSeries version 80001, git_sha=577bfa8b5909e7ee572f0b651399be8303dc6641
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> Redis version found by RedisTimeSeries : 8.0.3 - oss
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> Registering configuration options: [
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-compaction-policy   :              }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-num-threads         :            3 }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-retention-policy    :            0 }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-duplicate-policy    :        block }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-chunk-size-bytes    :         4096 }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-encoding            :   compressed }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-ignore-max-time-diff:            0 }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> 	{ ts-ignore-max-val-diff :     0.000000 }
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> ]
redis       | 1:M 06 Aug 2025 01:48:19.811 * <timeseries> Detected redis oss
redis       | 1:M 06 Aug 2025 01:48:19.812 * Module 'timeseries' loaded from /usr/local/lib/redis/modules//redistimeseries.so
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Created new data type 'ReJSON-RL'
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> version: 80001 git sha: unknown branch: unknown
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Exported RedisJSON_V1 API
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Exported RedisJSON_V2 API
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Exported RedisJSON_V3 API
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Exported RedisJSON_V4 API
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Exported RedisJSON_V5 API
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Enabled diskless replication
redis       | 1:M 06 Aug 2025 01:48:19.814 * <ReJSON> Initialized shared string cache, thread safe: false.
redis       | 1:M 06 Aug 2025 01:48:19.814 * Module 'ReJSON' loaded from /usr/local/lib/redis/modules//rejson.so
redis       | 1:M 06 Aug 2025 01:48:19.814 * <search> Acquired RedisJSON_V5 API
redis       | 1:M 06 Aug 2025 01:48:19.815 * Server initialized
redis       | 1:M 06 Aug 2025 01:48:19.815 * Ready to accept connections tcp
payment-db  | selecting default time zone ... UTC
payment-db  | creating configuration files ... ok
api2        | Running 'server'...
api2        | 2025/08/06 01:48:20 INFO server started on :9999
api1        | Running 'server'...
api1        | 2025/08/06 01:48:20 INFO server started on :9999
worker      | Running 'worker'...
worker      | [INFO] Starting Redis Queue with 4 workers
payment-db  | running bootstrap script ... ok
nginx-lb    | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-lb    | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-lb    | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-lb    | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-lb    | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-lb    | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-lb    | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-lb    | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-lb    | /docker-entrypoint.sh: Configuration complete; ready for start up
payment-db  | sh: locale: not found
payment-db  | 2025-08-06 01:48:21.330 UTC [35] WARNING:  no usable system locales were found
payment-db  | performing post-bootstrap initialization ... ok
payment-db  | initdb: warning: enabling "trust" authentication for local connections
payment-db  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
payment-db  | syncing data to disk ... ok
payment-db  | 
payment-db  | 
payment-db  | Success. You can now start the database server using:
payment-db  | 
payment-db  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
payment-db  | 
payment-db  | waiting for server to start.... done
payment-db  | server started
payment-db  | CREATE DATABASE
payment-db  | 
payment-db  | 
payment-db  | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
payment-db  | CREATE TABLE
payment-db  | CREATE INDEX
payment-db  | 
payment-db  | 
payment-db  | waiting for server to shut down.... done
payment-db  | server stopped
payment-db  | 
payment-db  | PostgreSQL init process complete; ready for start up.
payment-db  | 
api2        | [INFO] Cleared stream payment_stream
worker      | [Reclaim] Reprocessing message: 1754444920277-0
worker      | [Reclaim] Reprocessing message: 1754444920277-1
worker      | [Reclaim] Reprocessing message: 1754444920296-0
worker      | [Reclaim] Reprocessing message: 1754444920312-0
worker      | [Reclaim] Reprocessing message: 1754444920332-0
worker      | [Reclaim] Reprocessing message: 1754444920332-1
worker      | [Reclaim] Reprocessing message: 1754444920350-0
worker      | [Reclaim] Reprocessing message: 1754444920350-1
worker      | [Reclaim] Reprocessing message: 1754444920368-0
worker      | [Reclaim] Reprocessing message: 1754444920368-1
worker      | [Reclaim] Reprocessing message: 1754444920332-0
worker      | [Reclaim] Reprocessing message: 1754444920332-1
worker      | [Reclaim] Reprocessing message: 1754444920350-0
worker      | [Reclaim] Reprocessing message: 1754444920350-1
worker      | [Reclaim] Reprocessing message: 1754444920368-0
worker      | [Reclaim] Reprocessing message: 1754444920368-1
worker      | [Reclaim] Reprocessing message: 1754444920385-0
worker      | [Reclaim] Reprocessing message: 1754444920385-1
worker      | [Reclaim] Reprocessing message: 1754444920405-0
worker      | [Reclaim] Reprocessing message: 1754444920423-0
worker      | [WARN] No gateway available. Keeping message 1754444920350-0 pending.
worker      | [WARN] No gateway available. Keeping message 1754444920332-0 pending.
worker      | [WARN] No gateway available. Keeping message 1754444920332-1 pending.
worker      | [WARN] No gateway available. Keeping message 1754444920350-1 pending.
worker      | [Reclaim] Reprocessing message: 1754444920332-0
worker      | [Reclaim] Reprocessing message: 1754444920332-1
worker      | [Reclaim] Reprocessing message: 1754444920350-0
worker      | [Reclaim] Reprocessing message: 1754444920350-1
worker      | [Reclaim] Reprocessing message: 1754444920368-0
worker      | [Reclaim] Reprocessing message: 1754444920368-1
worker      | [Reclaim] Reprocessing message: 1754444920385-0
worker      | [Reclaim] Reprocessing message: 1754444920385-1
worker      | [Reclaim] Reprocessing message: 1754444920405-0
worker      | [Reclaim] Reprocessing message: 1754444920423-0
redis       | 1:M 06 Aug 2025 01:49:20.080 * 10000 changes in 60 seconds. Saving...
redis       | 1:M 06 Aug 2025 01:49:20.081 * Background saving started by pid 31
redis       | 31:C 06 Aug 2025 01:49:20.123 * DB saved on disk
redis       | 31:C 06 Aug 2025 01:49:20.124 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
redis       | 1:M 06 Aug 2025 01:49:20.182 * Background saving terminated with success
worker      | [Reclaim] Reprocessing message: 1754444920332-0
[Knginx-lb exited with code 0
api2        | 2025/08/06 01:49:32 INFO shutting down server...
api1        | 2025/08/06 01:49:32 INFO shutting down server...
[Kapi2 exited with code 0
worker      | [Reclaim] Reprocessing message: 1754444920332-1
worker      | [Reclaim] Reprocessing message: 1754444920350-0
worker      | [Reclaim] Reprocessing message: 1754444920350-1
worker      | [ERROR] Failed to process payment 9ca1467b-67f8-42cc-b40a-b22a6d3e1be4: invalid response from gateway: map[message:Payment could not be processed. CorrelationId already exists: 9ca1467b-67f8-42cc-b40a-b22a6d3e1be4. Error details: Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "payments_pkey"
worker      | 
worker      | DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
worker      |    at Npgsql.Internal.NpgsqlConnector.<ReadMessageLong>d__235.MoveNext() + 0x9b4
worker      | --- End of stack trace from previous location ---
worker      |    at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16) + 0x2c
worker      |    at Npgsql.NpgsqlDataReader.<NextResult>d__52.MoveNext() + 0x5e6
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataReader.<NextResult>d__52.MoveNext() + 0x208f
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteReader>d__120.MoveNext() + 0x96c
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteReader>d__120.MoveNext() + 0x1057
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataSourceCommand.<ExecuteReader>d__2.MoveNext() + 0x291
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataSourceCommand.<ExecuteReader>d__2.MoveNext() + 0x38f
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteNonQuery>d__108.MoveNext() + 0x221
worker      | --- End of stack trace from previous location ---
worker      |    at Program.<>c.<<<Main>$>b__0_4>d.MoveNext() + 0x127
worker      | --- End of stack trace from previous location ---
worker      |    at Program.<>c.<<<Main>$>b__0_4>d.MoveNext() + 0x507
worker      |   Exception data:
worker      |     Severity: ERROR
worker      |     SqlState: 23505
worker      |     MessageText: duplicate key value violates unique constraint "payments_pkey"
worker      |     Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
worker      |     SchemaName: public
worker      |     TableName: payments
worker      |     ConstraintName: payments_pkey
worker      |     File: nbtinsert.c
worker      |     Line: 666
worker      |     Routine: _bt_check_unique]
worker      | [ERROR] Failed to process payment 9f07eec5-83f5-4c1e-a8eb-66f9f8d47ef9: invalid response from gateway: map[message:Payment could not be processed. CorrelationId already exists: 9f07eec5-83f5-4c1e-a8eb-66f9f8d47ef9. Error details: Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "payments_pkey"
worker      | 
worker      | DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
worker      |    at Npgsql.Internal.NpgsqlConnector.<ReadMessageLong>d__235.MoveNext() + 0x9b4
worker      | --- End of stack trace from previous location ---
worker      |    at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16) + 0x2c
worker      |    at Npgsql.NpgsqlDataReader.<NextResult>d__52.MoveNext() + 0x5e6
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataReader.<NextResult>d__52.MoveNext() + 0x208f
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteReader>d__120.MoveNext() + 0x96c
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteReader>d__120.MoveNext() + 0x1057
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataSourceCommand.<ExecuteReader>d__2.MoveNext() + 0x291
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlDataSourceCommand.<ExecuteReader>d__2.MoveNext() + 0x38f
worker      | --- End of stack trace from previous location ---
worker      |    at Npgsql.NpgsqlCommand.<ExecuteNonQuery>d__108.MoveNext() + 0x221
worker      | --- End of stack trace from previous location ---
worker      |    at Program.<>c.<<<Main>$>b__0_4>d.MoveNext() + 0x127
worker      | --- End of stack trace from previous location ---
worker      |    at Program.<>c.<<<Main>$>b__0_4>d.MoveNext() + 0x507
worker      |   Exception data:
worker      |     Severity: ERROR
worker      |     SqlState: 23505
worker      |     MessageText: duplicate key value violates unique constraint "payments_pkey"
worker      |     Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
worker      |     SchemaName: public
worker      |     TableName: payments
worker      |     ConstraintName: payments_pkey
worker      |     File: nbtinsert.c
worker      |     Line: 666
worker      |     Routine: _bt_check_unique]
worker      | [Reclaim] Reprocessing message: 1754444936888-0
worker      | [Reclaim] Reprocessing message: 1754444936925-0
[Kworker exited with code 137
redis       | 1:signal-handler (1754444983) Received SIGTERM scheduling shutdown...
redis       | 1:M 06 Aug 2025 01:49:43.285 * User requested shutdown...
redis       | 1:M 06 Aug 2025 01:49:43.285 * Saving the final RDB snapshot before exiting.
redis       | 1:M 06 Aug 2025 01:49:43.325 * DB saved on disk
redis       | 1:M 06 Aug 2025 01:49:43.325 # Redis is now ready to exit, bye bye...
[Kpayment-db exited with code 0
[Kredis exited with code 0
log truncated at line 1000
